
<!-- saved from url=(0077)http://www.teach.cs.toronto.edu/~csc209h/winter/labs/lab3-dynamic-memory.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body><h1 id="lab-3-dynamic-memory">Lab 3: Dynamic Memory</h1>
<p><strong>Due date</strong>: Friday 26 January before 6:30pm. Submissions made after the deadline will not be accepted.</p>
<h2 id="introduction">Introduction</h2>
<p>The purpose of this lab is to practice using pointers and dynamic memory allocation and to learn to use the valgrind tool.</p>
<p>To start, login to MarkUs and navigate to the <code>lab3</code> assignment. Like the previous lab, this triggers the starter code for this lab to be committed to your repository.</p>
<h2 id="fibonacci">Fibonacci</h2>
<p>Your first program will build a dynamic array containing the first <code>n</code> elements of the fibonacci sequence. Write the <code>fibonacci</code> function in the <code>fibonacci.c</code> file. Do not change the <code>main</code> function.</p>
<h2 id="split-arrays">Split Arrays</h2>
<p>In the <code>split_array.c</code> program, you will write the bodies of two functions. You will need to fill in the arguments to correctly call the two functions so that your program behaves as shown in the following examples.</p>
<p>Here are a couple of things to notice:</p>
<ul>
<li><code>$</code> is just the shell prompt</li>
<li><code>argv[0]</code> is <em>not</em> included in the result arrays.</li>
</ul>
<pre class="console"><code>$ ./split_array 1 2 3
Original array:
1 2 3
result[0]:
1 3
result[1]:
2
$ ./split_array 1
Original array:
1
result[0]:
1
result[1]:

$ ./split_array
Original array:

result[0]:

result[1]:

$ ./split_array 10 234 6 5 33 44
Original array:
10 234 6 5 33 44
result[0]:
10 6 33
result[1]:
234 5 44</code></pre>
<h2 id="using-valgrind">Using Valgrind</h2>
<p>The program <code>valgrind</code> is a tool that is used for detecting memory and other errors in programs. In particular, it can detect when memory is not allocated or freed correctly.</p>
<p>Running <code>valgrind</code> on the solution to <code>split_array</code> produces the following output:</p>
<pre><code>$ valgrind split_array 1 2 3
==52893== Memcheck, a memory error detector
==52893== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.
==52893== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info
==52893== Command: split_array 1 2 3
==52893==
Original array:
1 2 3
result[0]:
1 3
result[1]:
2
==52893==
==52893== HEAP SUMMARY:
==52893==     in use at exit: 0 bytes in 0 blocks
==52893==   total heap usage: 5 allocs, 5 frees, 1,066 bytes allocated
==52893==
==52893== All heap blocks were freed -- no leaks are possible
==52893==
==52893== For counts of detected and suppressed errors, rerun with: -v
==52893== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)</code></pre>
<p>Try running <code>valgrind</code> on your solution to <code>split_array</code> on teach.cs. You should be able to get similar output. The "HEAP SUMMARY" should show that no bytes are still in use at exit, and the "ERROR SUMMARY" should show 0 errors.</p>
<p>If you didn't have any errors to fix and have more time, comment out one of the <code>free</code> statements in <code>split_array</code> and rerun <code>valgrind</code> to see the results. Don't forget to put it back before you commit your final solution.</p>
</body></html>