<h1 id="lab-1-introduction-to-the-unix-shell-and-c-programs">Lab 1: Introduction to the Unix Shell and C Programs</h1>
<p><strong>Due date</strong>: Friday 12 January before 6:30pm. Submissions made after the deadline will not be accepted.</p>
<h2 id="introduction">Introduction</h2>
<p>The purpose of this lab is to practice using a few different shell commands to navigate through the file system, review git, and compile and run simple C programs.</p>
<p><strong>Before starting this lab, we strongly recommend you complete the following sections on the <a href="https://pcrs.teach.cs.toronto.edu/209/">PCRS</a>:</strong></p>
<ul>
<li>C Language Basics -&gt; DISCOVER: Types, Variables and Assignment Statements (video 1)</li>
<li>C Language Basics -&gt; DISCOVER: Input, Output and Compiling (all videos)</li>
</ul>
<p>You'll find the other videos in the &quot;C Language Basics&quot; part useful as a reference as you start working with C.</p>
<p>You should also have your computing environment set up (see <a href="lab0-software-setup.html">Lab 0</a>) before starting this lab.</p>
<h2 id="markus-and-git">0. MarkUs and git</h2>
<p>To start, login to MarkUs and navigate to the <code>lab1</code> assignment. You'll find your repository URL to clone, much like you did for Lab 0. <em>Even if you know your MarkUs repo URL, it's important to visit the page first!</em> This triggers the starter code for this lab to be committed to your repository.</p>
<p>Then, open a terminal on your computer and do a <code>git pull</code> in your CSC209 MarkUs repository. You should see a new folder called <code>lab1</code> with some starter code inside. Make sure to do all your work on this lab in that folder.</p>
<h2 id="basic-utilities">1. Basic utilities</h2>
<p>Your first task is to inspect the contents of the <code>lab1</code> folder. In the command line, use the <code>ls</code> command to inspect the contents of this folder. Use the <a href="http://man7.org/linux/man-pages/man1/ls.1.html">man page for <code>ls</code></a>, which we encourage you to explore the different options you can pass to <code>ls</code> as command-line arguments to vary its behaviour. Note that you can pass multiple command-line arguments to <code>ls</code>.</p>
<p>Play around with these options now, and see if you can do each of the following: (Note that these commands will show you both files and directories.)</p>
<ol style="list-style-type: decimal">
<li>Use <code>-l</code> to show metadata about each file in the current working directory.</li>
<li>Show the same metadata about each file as <code>-l</code>, except do <em>not</em> show the owner or group of the file.</li>
<li>Show only the filename and size of each file, one per line.</li>
<li>Show all files in the current working directory including the <em>hidden</em> files, which are files that start with a &quot;.&quot;</li>
</ol>
<h2 id="compiling-and-running-c-programs">2. Compiling and running C programs</h2>
<p>You should see a bunch of different C source code files being listed by <code>ls</code>. For each one, do the following:</p>
<ol style="list-style-type: decimal">
<li>Compile it by running the command <code>gcc -Wall -std=gnu99 -g &lt;filename&gt;</code>. The arguments <code>-Wall</code>, <code>-std-gnu99</code>, and <code>-g</code> are the standard compiler flags we'll be using in this course -- more about these later.</li>
<li>Run it according to its usage. Note that some of the executables take no command-line arguments, some require at least one command-line argument of a certain form, and some will read in keyboard input. Try running each program and read the code to learn what each program does!</li>
</ol>
<h2 id="a-simple-script">3. A simple script</h2>
<p>Executing commands one at a time in the shell is not scalable: often we have a set of commands we want to execute together repeatedly. We can do so by writing a <em>shell script</em>, which is a program written in a shell programming language like <code>bash</code>. We'll return to shell programming at the end of this course, but for now, you'll write the simplest type of shell program: a list of commands.</p>
<p>To do this, create a new file in your <code>lab1</code> directory called <code>compile_all.sh</code>; you can do this using any text editor you like. The first line of the file should be the following:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="co">#!/usr/bin/env bash</span></code></pre></div>
<p>This line is called a <a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">shebang</a> line, and is used to tell the operating system to interpret the contents of the file as a shell program.</p>
<p>In this file, write one line for each compilation command you ran in Part 2. <strong>If you are on Windows, you need to ensure your text editor is using Unix-style line endings (aka &quot;LF&quot; or &quot;\n&quot;) for this file.</strong></p>
<p>Then in the command line, run your script just as you would any other executable:</p>
<pre class="console"><code>$ ./compile_all.sh</code></pre>
<p>This should fail! The operating system will not run this program because the file is not executable. On Unix the permission settings of the file determine whether a file is executable.</p>
<p>To change the permissions we will use the program <code>chmod</code>:</p>
<pre class="console"><code>$ chmod a+x compile_all.sh</code></pre>
<p>You can read the man page (<code>man chmod</code>) to see what arguments <code>chmod</code> accepts. In this case, the 'a' means that we want to change the permissions for all users, the '+' means that we are adding permissions, and the 'x' means the executable permissions.</p>
<p>Now try running the shell script again.</p>
<p>If you inspect the contents of your folder using <code>ls -l</code>, you should see that the compilation has been successful and an executable has been produced. Unfortunately, there's a problem: because <code>gcc</code> uses the default executable name <code>a.out</code> for the executable, each compilation command in your script overwrites the result of the previous step. To fix this problem, modify your script by using the <code>-o &lt;out_name&gt;</code> gcc flag to produce executables whose names match the C source files, without the extension.</p>
<p>For example, use the command</p>
<pre class="console"><code>gcc -Wall -std=gnu99 -g -o hello hello.c</code></pre>
<p>to compile <code>hello.c</code> into an executable named <code>hello</code>.</p>
<p>Then when you re-run your script, you should be able to see the resulting executables all created.</p>
<p><strong>Note</strong>: this compilation script is a poor way to automate the compilation of multiple C programs in practice. Later in the term, we'll learn about the Unix software tool <code>make</code>, which is the industry standard for managing compilation.</p>
<h2 id="redirection-pipes-and-more-unix-utilities">4. Redirection, pipes, and more Unix utilities</h2>
<p>Now that we have some programs, your final task will be to review how input and output redirection work, and review some basic shell utilities. Create a second shell script called <code>my_commands.sh</code> that contains commands that perform each of the following tasks (each of the following should be done in just a single line, and be performed in order):</p>
<ol style="list-style-type: decimal">
<li>Run <code>echo_arg</code> with the command-line argument <code>csc209</code> and redirect the output to the file <code>echo_out.txt</code>.</li>
<li>Run <code>echo_stdin</code> with its standard input redirected from the file <code>echo_stdin.c</code>.</li>
<li>Use a combination of <code>count</code> and the Unix utility program <a href="https://linux.die.net/man/1/wc"><code>wc</code></a> to determine the <em>total number of digits</em> in the decimal representations of the numbers from 0 to 209, inclusive.</li>
<li>Use a combination of <code>echo_stdin</code> and <a href="http://man7.org/linux/man-pages/man1/ls.1.html"><code>ls</code></a> to print out the name of the <strong>largest</strong> file in the current directory. You can assume the largest file has a name with fewer than 30 characters.</li>
</ol>
<h2 id="submission">Submission</h2>
<p>Use git to submit your final <code>compile_all.sh</code> and <code>my_commands.sh</code> -- make sure they're inside your <code>lab1</code> folder and named exactly as described in this handout, as that's where our test scripts will be looking for them.</p>
<p>You do <em>not</em> need to submit anything for Sections 1 or 2.</p>
<p><strong>IMPORTANT</strong>: make sure to review how to use git to submit your work to the MarkUs server; in particular, you need to run <code>git push</code>, not just <code>git commit</code> and <code>git add</code>.</p>
